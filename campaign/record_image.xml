<?xml version="1.0" encoding="utf-8"?>

<!--
  Please see the license.html file included with this distribution for 
  attribution and copyright information.
-->

<root>
	<windowclass name="imagewindow" merge="join">
		<sheetdata>
			<image_content name="image">
				<script file="campaign/scripts/image.lua" />
			</image_content>
		</sheetdata>
	</windowclass>

	<windowclass name="imagewindow_toolbar" merge="join">
		<script>
			function onInit()
				super.onInit();

				h6.setVisible(Session.IsHost);
				warfare.setVisible(Session.IsHost);
				self.onWarfareChanged();
			end
			function onWarfareChanged()
				bShow = (warfare.getValue() == 1);
				rank_position.setVisible(bShow);
				h7.setVisible(bShow);
				files.setVisible(bShow)
				files_label.setVisible(bShow);

				WarfareManager.setMarkersActive(UtilityManager.getTopWindow(self), bShow);
				if not bShow then
					local cImage = WindowManager.callOuterWindowFunction(self, "getImage");
					ImageManagerKw.deselectLockableTokens(cImage, bShow);
				end
			end
		</script>
		<sheetdata>
			<toolbar_separator_right name="h6" />
			<toolbar_field_right name="warfare">
				<initbyname />
			</toolbar_field_right>
			<toolbar_multifield_right name="rank_position">
				<initbyname />
			</toolbar_multifield_right>

			<toolbar_separator_right name="h7" />
			<basicnumber name="files">
				<anchored to="rightanchor" width="30" height="20">
					<top />
					<right relation="relative" offset="-5" postoffset="-5" />
				</anchored>
				<min>1</min>
				<default>5</default>
				<max>10</max>
				<invisible />
			</basicnumber>
			<label name="files_label">
				<anchored to="rightanchor" height="20">
					<top />
					<right relation="relative" />
				</anchored>
				<static textres="label_image_files" />
				<invisible />
			</label>
		</sheetdata>
	</windowclass>
</root>
